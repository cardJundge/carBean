<!--pages/community/community.wxml-->
<import src="../../components/community-modal/community.wxml" />

<view class='container'>

  <!-- <my-tab-modal tablist="{{tablist}}" currentTab='{{currentTab}}' bind:send='onSend'/> -->

  <my-tab-modal tablist="{{tablist}}" currentTab='{{currentTab}}' sidelist='{{sidelist}}' animation="{{animation}}" bind:send='onSend' bind:select='onSelect' />

  <view class='outMap' wx:if="{{communitymodeshow}}">

    <view class='section'>
      <template is='dynamicList' data='{{dynamicArr,hostName,islogin,isvoiceplay,dylogo}}' />
      <view class='loading_img_cell' wx:if='{{loadedMore}}'>
        <image src='../../images/community/loading.gif'></image>
      </view>
      <!-- <view class='noData' wx:if='{{dynamicNull}}'>该地区还没有动态哦，快来发布第一条数据吧~</view> -->
      <view class='noData' wx:if='{{dynamicNull}}'>
        <null-modal img="{{'cloud://cheguanjia1-beb14e.6368-cheguanjia1-beb14e/mine/msg_null.png'}}" text01="暂无动态" width="208" height="250" btnHidden="true" />
      </view>
      <view class='noData' wx:if='{{noData}}'>
        <view class='left-line'></view>
        <view class='text'>到底啦</view>
        <view class='right-line'></view>
      </view>
    </view>
    <cover-view class='public' bindtap='openPublic' style='top:{{top}}px;left:{{left}}px;display:{{videostyle}}'>
      <!-- <cover-image src='cloud://cheguanjia1-beb14e.6368-cheguanjia1-beb14e/community/icon_Release@2x.png'></cover-image> -->

      <cover-image src="/images/icon_Release@2x.png"></cover-image>

    </cover-view>
  </view>


<view wx:else>

  <!-- <cover-view class="swiper-tab">
    <cover-view wx:for="{{tablist}}" wx:key="index" class="swiper-tab-list {{currentTab==index ? 'active' : ''}}" bindtap='switchnav' data-index='{{index}}'>
      <cover-view>{{item}}</cover-view>
      <cover-view class="{{currentTab==index ? 'line' : ''}}"></cover-view>
    </cover-view>
  </cover-view> -->

  <map longitude="{{longitude}}" latitude="{{latitude}}" show-location="{{showlocation}}" markers='{{markers}}' bindregionchange="regionchange" id='map'  class="map" bindmarkertap="markerstap" scale="{{mapscale}}"></map>

  <canvas canvas-id='handleCanvas' hidden='true' ></canvas>

  <!-- 控件 -->
      <cover-image class='scale_icon_add' src='cloud://a-data-1a3ebf.612d-a-data-1a3ebf/community/mapInc.png' bindtap='enlargeMap' hidden='{{setshow}}'></cover-image>
      <cover-image class='scale_icon_decrease' src='cloud://a-data-1a3ebf.612d-a-data-1a3ebf/community/mapDec.png' bindtap='narrowMap'  hidden='{{setshow}}'></cover-image>

      <cover-image  class="setting" src='cloud://a-data-1a3ebf.612d-a-data-1a3ebf/community/setting.png' bindtap="mylocation"  hidden='{{setshow}}'></cover-image>

   

      <cover-view class='public' bindtap='openPublic' style='top:{{top}}px;left:{{left}}px;display:{{videostyle}}'>
      <!-- <cover-image src='cloud://cheguanjia1-beb14e.6368-cheguanjia1-beb14e/community/icon_Release@2x.png'></cover-image> -->

      <cover-image src="/images/icon_Release@2x.png"></cover-image>

    </cover-view>

  <!-- <my-location-modal show="{{locationshow}}" bind:hide="hideLoginModal" /> -->
</view>





  <cover-view class='public_modal' wx:if='{{ifPublic}}' catchtap='closePublic'>
    <cover-view class='pmodal_content'>
      <cover-view class='icons'>
        <cover-view class='icon_cell' bindtap='toPublicText'>
          <cover-image src='/images/community/tt.png'></cover-image>
          <!-- <cover-view>图文</cover-view> -->
        </cover-view>
        <cover-view class='icon_cell' bindtap='topublicVideo'>
          <!-- <cover-image src='../../../images/icon_video@2x.png'></cover-image> -->
          <cover-image src='/images/community/tt1.png'></cover-image>
          <!-- <cover-view>视频</cover-view> -->
        </cover-view>

        <cover-view class='icon_cell' bindtap='topublicVoice'>

          <cover-image src='/images/community/tt2.png'></cover-image>

        </cover-view>
      </cover-view>
      <cover-view class='close' catchtap='closePublic'>
        <cover-image src='/images/community/close.png'></cover-image>
        <!-- <cover-view>关闭</cover-view> -->
      </cover-view>
    </cover-view>
  </cover-view>

  <my-login-modal show="{{showLoginModal}}" bind:hide="hideLoginModal" />
  <!-- <my-location-modal show="{{locationshow}}" bind:hide="hideLoginModal"/> -->
  
  <my-voice-modal show="{{showVoiceModal}}" bind:refresh="refresh" bind:location="getLocation" mode="动态"/>

  <my-location-modal show="{{locationshow}}" bind:hide="hideLocationModal" />
</view>

